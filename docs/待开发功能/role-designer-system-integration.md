# PromptXæ ¸å¿ƒåŠŸèƒ½å‡çº§ï¼šRole-Designerç³»ç»Ÿé›†æˆæ–¹æ¡ˆ

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

### èƒŒæ™¯åˆ†æ
å½“å‰PromptXä½œä¸ºå¯å¤ç”¨å·¥å…·ä»“åº“é¢ä¸´çš„æ ¸å¿ƒç—›ç‚¹ï¼š
- **ç”¨æˆ·åˆ›æ–°éœ€æ±‚**ï¼šç”¨æˆ·å¸Œæœ›å·¥å…·å…·å¤‡åˆ›æ–°æ€§ï¼Œèƒ½å¤Ÿåˆ›å»ºè‡ªå®šä¹‰è§’è‰²
- **âš ï¸ è§„èŒƒä¸ç¬¦é—®é¢˜**ï¼šrole-designeråˆ›å»ºçš„è§’è‰²**ä¸¥é‡ä¸ç¬¦åˆPromptXè§„èŒƒ**
  - ç”Ÿæˆçš„ä¸»æ–‡ä»¶è¿‡äºå¤æ‚ï¼Œä¸assistant.role.mdæ ¼å¼ä¸ä¸€è‡´
  - å¼•ç”¨æ ¼å¼é”™è¯¯ï¼Œæ²¡æœ‰ä½¿ç”¨æ ‡å‡†çš„`@!thought://`å’Œ`@!execution://`
  - æ–‡ä»¶ç»“æ„æ··ä¹±ï¼Œç»„ä»¶åˆ†ç¦»ä¸å½“
- **é›†æˆåº¦ä¸è¶³**ï¼šè§’è‰²åˆ›å»ºä¸ç³»ç»Ÿåˆå§‹åŒ–è¿‡ç¨‹è„±èŠ‚
- **ç”¨æˆ·ä½“éªŒå‰²è£‚**ï¼šéœ€è¦æ‰‹åŠ¨å¤„ç†æ–‡ä»¶åˆ›å»ºã€éªŒè¯ã€æ³¨å†Œç­‰æ­¥éª¤

**ğŸ¯ æ ¸å¿ƒé—®é¢˜**ï¼šç”Ÿæˆçš„è§’è‰²æ— æ³•è¢«PromptXç³»ç»Ÿæ­£ç¡®è¯†åˆ«å’Œæ¿€æ´»ï¼

### è§£å†³æ–¹æ¡ˆæ ¸å¿ƒæ€è·¯
**å°†role-designerå‡çº§ä¸ºPromptXç³»ç»Ÿçš„æ™ºèƒ½åŒ–è§’è‰²åˆ›æ–°æ ¸å¿ƒ**ï¼Œ**å®ç°è§„èŒƒä¸åˆ›æ–°çš„å®Œç¾å¹³è¡¡**ï¼š

**ğŸ¯ åŒå±‚æ¶æ„æ ¸å¿ƒ**ï¼š
- âœ… **è§„èŒƒä¿è¯å±‚**ï¼š100%ç¬¦åˆPromptXè§„èŒƒï¼Œä¸assistant.role.mdæ ¼å¼å®Œå…¨ä¸€è‡´
- ğŸš€ **åˆ›æ–°ç”Ÿæˆå±‚**ï¼šAIé©±åŠ¨çš„ä¸ªæ€§åŒ–å†…å®¹åˆ›æ–°ï¼Œæ»¡è¶³æ— é™åˆ›æ–°éœ€æ±‚

**ğŸ”§ æ ¸å¿ƒæŠ€æœ¯è·¯å¾„**ï¼š
- ğŸ¯ **è§„èŒƒä¼˜å…ˆ**ï¼šç”Ÿæˆçš„è§’è‰²ä¸»æ–‡ä»¶å¿…é¡»ä¸assistant.role.mdæ ¼å¼100%ä¸€è‡´
- ğŸ”— **æ ‡å‡†å¼•ç”¨**ï¼šå¼ºåˆ¶ä½¿ç”¨`@!thought://`å’Œ`@!execution://`å¼•ç”¨æ ¼å¼
- ğŸ“ **ç»„ä»¶åˆ†ç¦»**ï¼šä¸»æ–‡ä»¶æç®€åŒ–ï¼Œå†…å®¹å®Œå…¨åˆ†ç¦»åˆ°thoughtå’Œexecutionæ–‡ä»¶
- ğŸ§  **æ™ºèƒ½éœ€æ±‚ç†è§£**ï¼šæ·±åº¦åˆ†æç”¨æˆ·æ„å›¾ï¼Œç”Ÿæˆä¸ªæ€§åŒ–ä¸“ä¸šå†…å®¹
- ğŸ”„ **åŠ¨æ€å†…å®¹èåˆ**ï¼šæ™ºèƒ½èåˆå¤šä¸ªæ¨¡æ¿ç²¾åï¼Œåˆ›é€ ç‹¬ç‰¹è§’è‰²ç‰¹å¾
- âœ… **åŒé‡éªŒè¯**ï¼šPromptXè§„èŒƒ100%åˆè§„ + AIé©±åŠ¨çš„åˆ›æ–°è´¨é‡è¯„ä¼°
- ğŸ”„ **ç³»ç»Ÿé›†æˆ**ï¼šç¡®ä¿ç”Ÿæˆçš„è§’è‰²èƒ½è¢«æ­£ç¡®å‘ç°å’Œæ¿€æ´»
- ğŸš€ **æ™ºèƒ½ä½“éªŒ**ï¼šä»éœ€æ±‚ç†è§£åˆ°ä¸ªæ€§åŒ–åˆ›å»ºçš„ä¸€é”®å¼æ™ºèƒ½æ“ä½œ

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„è®¾è®¡

### 1. æ ¸å¿ƒåŠŸèƒ½æ¶æ„

```mermaid
graph TD
    A[PromptX CLI] --> B[æ™ºèƒ½è§’è‰²åˆ›æ–°å¼•æ“]
    F[ç”¨æˆ·éœ€æ±‚è¾“å…¥] --> B1[éœ€æ±‚æ·±åº¦åˆ†æå™¨]
    B1 --> B2[é¢†åŸŸçŸ¥è¯†é›†æˆå™¨]
    B2 --> B
    
    B --> C[åŒå±‚ç”Ÿæˆæ¶æ„]
    C --> C1[è§„èŒƒä¿è¯å±‚]
    C --> C2[åˆ›æ–°ç”Ÿæˆå±‚]
    
    C1 --> C11[æ ‡å‡†ä¸»æ–‡ä»¶ç”Ÿæˆ]
    C1 --> C12[æ ‡å‡†ç»„ä»¶ç»“æ„]
    C1 --> C13[å¼•ç”¨æ ¼å¼æ ‡å‡†åŒ–]
    
    C2 --> C21[ä¸ªæ€§åŒ–å†…å®¹åˆ›æ–°]
    C2 --> C22[åŠ¨æ€æ¨¡æ¿èåˆ]
    C2 --> C23[ä¸Šä¸‹æ–‡æ„ŸçŸ¥ç”Ÿæˆ]
    
    C --> D[åŒé‡éªŒè¯å¼•æ“]
    D --> D1[PromptXè§„èŒƒéªŒè¯]
    D --> D2[åˆ›æ–°è´¨é‡è¯„ä¼°]
    D --> D3[ç³»ç»Ÿå…¼å®¹æ€§éªŒè¯]
    
    D --> E[æ™ºèƒ½éƒ¨ç½²ç³»ç»Ÿ]
    E --> E1[æ–‡ä»¶æ ‡å‡†åŒ–åˆ›å»º]
    E --> E2[ç³»ç»Ÿè‡ªåŠ¨å‘ç°]
    E --> E3[æ¿€æ´»å…¼å®¹æ€§æµ‹è¯•]
    
    G[æ™ºèƒ½æ¨¡æ¿åº“] --> B
    H[é¢†åŸŸçŸ¥è¯†åº“] --> B2
    E --> I[ä¸ªæ€§åŒ–ä¸“ä¸šè§’è‰²]
    I --> J[å®Œç¾ç³»ç»Ÿé›†æˆ]
```

### 2. ç³»ç»Ÿé›†æˆå±‚æ¬¡

```mermaid
flowchart TD
    subgraph "åº”ç”¨å±‚"
        A1[CLIå‘½ä»¤æ¥å£]
        A2[äº¤äº’å¼å‘å¯¼]
        A3[æ‰¹é‡åˆ›å»ºå·¥å…·]
    end
    
    subgraph "ä¸šåŠ¡é€»è¾‘å±‚"
        B1[è§’è‰²è®¾è®¡å¼•æ“]
        B2[æ¨¡æ¿ç”Ÿæˆå™¨]
        B3[æ™ºèƒ½æ¨èç³»ç»Ÿ]
        B4[è´¨é‡æ§åˆ¶ç³»ç»Ÿ]
    end
    
    subgraph "æ ¸å¿ƒæœåŠ¡å±‚"
        C1[DPMLéªŒè¯æœåŠ¡]
        C2[æ–‡ä»¶ç®¡ç†æœåŠ¡]
        C3[è‡ªåŠ¨æ³¨å†ŒæœåŠ¡]
        C4[ç³»ç»Ÿå‘ç°æœåŠ¡]
    end
    
    subgraph "æ•°æ®å±‚"
        D1[è§’è‰²æ¨¡æ¿åº“]
        D2[æœ€ä½³å®è·µåº“]
        D3[ç”¨æˆ·åå¥½æ•°æ®]
        D4[ç³»ç»Ÿé…ç½®]
    end
    
    A1 --> B1
    A2 --> B2
    A3 --> B1
    B1 --> C1
    B2 --> C2
    B3 --> D1
    B4 --> C1
    C1 --> D4
    C2 --> D1
    C3 --> D4
    C4 --> D1
```

## ğŸ›ï¸ æ ¸å¿ƒåŠŸèƒ½è®¾è®¡

### 1. CLIå‘½ä»¤ç•Œé¢

#### æ–°å¢æ™ºèƒ½åˆ›æ–°å‘½ä»¤
```bash
# æ™ºèƒ½åˆ›æ–°è§’è‰²åˆ›å»ºï¼ˆäº¤äº’å¼ - æ¨èï¼‰
npx dpml-prompt create-role --smart

# å¿«é€Ÿæ™ºèƒ½åˆ›å»ºï¼ˆAIè¾…åŠ©å‚æ•°è§£æï¼‰
npx dpml-prompt create-role --name "AIæ•°æ®åˆ†æå¸ˆ" --innovation-level high --personalize

# åŸºäºéœ€æ±‚æè¿°çš„æ™ºèƒ½åˆ›å»ºï¼ˆè‡ªç„¶è¯­è¨€è¾“å…¥ï¼‰
npx dpml-prompt create-role --describe "æˆ‘éœ€è¦ä¸€ä¸ªæ—¢æ‡‚æŠ€æœ¯åˆæ‡‚ä¸šåŠ¡çš„å…¨æ ˆæ•°æ®äº§å“ç»ç†"

# æ™ºèƒ½æ¨¡æ¿ç®¡ç†
npx dpml-prompt templates list --smart  # æ˜¾ç¤ºAIæ¨èæ¨¡æ¿
npx dpml-prompt templates create --ai-generate --domain "åŒºå—é“¾å¼€å‘"

# æ™ºèƒ½éªŒè¯å’Œåˆ›æ–°ä¼˜åŒ–
npx dpml-prompt validate-role --path "./my-role" --innovation-check
npx dpml-prompt optimize-role --path "./my-role" --ai-enhance

# æ‰¹é‡æ™ºèƒ½åˆ›å»º
npx dpml-prompt create-roles --smart-batch --config "./innovative-roles-config.json"
```

#### é›†æˆåˆ°ç°æœ‰å‘½ä»¤
```bash
# æ‰©å±•helloå‘½ä»¤ï¼Œæ˜¾ç¤ºå¯åˆ›å»ºçš„è§’è‰²ç±»å‹
npx dpml-prompt hello --show-templates

# æ‰©å±•registerå‘½ä»¤ï¼Œæ”¯æŒè‡ªåŠ¨éªŒè¯
npx dpml-prompt register [è§’è‰²å] --auto-fix
```

### 2. äº¤äº’å¼è§’è‰²åˆ›å»ºå‘å¯¼

```mermaid
flowchart TD
    A[å¯åŠ¨åˆ›å»ºå‘å¯¼] --> B[è§’è‰²ç±»å‹é€‰æ‹©]
    B --> C[åŸºæœ¬ä¿¡æ¯æ”¶é›†]
    C --> D[ä¸“ä¸šé¢†åŸŸå®šä¹‰]
    D --> E[æ€ç»´ç‰¹å¾è®¾è®¡]
    E --> F[æ‰§è¡Œæ¡†æ¶é€‰æ‹©]
    F --> G[æ¨¡æ¿ä¸ªæ€§åŒ–]
    G --> H[é¢„è§ˆç¡®è®¤]
    H --> I{ç”¨æˆ·ç¡®è®¤?}
    I -->|æ˜¯| J[è‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶]
    I -->|å¦| K[è¿”å›ä¿®æ”¹]
    K --> E
    J --> L[DPMLéªŒè¯]
    L --> M{éªŒè¯é€šè¿‡?}
    M -->|æ˜¯| N[è‡ªåŠ¨æ³¨å†Œ]
    M -->|å¦| O[æ™ºèƒ½ä¿®å¤]
    O --> P{ä¿®å¤æˆåŠŸ?}
    P -->|æ˜¯| N
    P -->|å¦| Q[æ‰‹åŠ¨æŒ‡å¯¼]
    Q --> L
    N --> R[æµ‹è¯•æ¿€æ´»]
    R --> S[å®Œæˆåˆ›å»º]
```

#### å‘å¯¼ç•Œé¢è®¾è®¡
```javascript
// ä¼ªä»£ç ç¤ºä¾‹
const roleCreationWizard = {
  steps: [
    {
      name: "è§’è‰²ç±»å‹é€‰æ‹©",
      options: [
        { value: "professional", label: "ğŸ¯ ä¸“ä¸šè§’è‰²ï¼ˆå¦‚ï¼šæ•°æ®åˆ†æå¸ˆã€äº§å“ç»ç†ï¼‰" },
        { value: "creative", label: "ğŸ¨ åˆ›æ„è§’è‰²ï¼ˆå¦‚ï¼šæ–‡æ¡ˆç­–åˆ’ã€è®¾è®¡å¸ˆï¼‰" },
        { value: "technical", label: "âš™ï¸ æŠ€æœ¯è§’è‰²ï¼ˆå¦‚ï¼šæ¶æ„å¸ˆã€å¼€å‘è€…ï¼‰" },
        { value: "management", label: "ğŸ“Š ç®¡ç†è§’è‰²ï¼ˆå¦‚ï¼šé¡¹ç›®ç»ç†ã€å›¢é˜Ÿé¢†å¯¼ï¼‰" },
        { value: "custom", label: "ğŸ› ï¸ è‡ªå®šä¹‰è§’è‰²" }
      ]
    },
    {
      name: "åŸºæœ¬ä¿¡æ¯æ”¶é›†",
      fields: [
        { name: "roleName", label: "è§’è‰²åç§°", required: true },
        { name: "displayName", label: "æ˜¾ç¤ºåç§°", required: true },
        { name: "description", label: "åŠŸèƒ½æè¿°", required: true },
        { name: "icon", label: "è§’è‰²å›¾æ ‡", type: "select" }
      ]
    },
    // ... æ›´å¤šæ­¥éª¤
  ]
}
```

### 3. æ™ºèƒ½åˆ›æ–°æ¨¡æ¿ç³»ç»Ÿ (è§„èŒƒ+åˆ›æ–°åŒå¼•æ“)

#### æ™ºèƒ½æ¨¡æ¿åˆ†ç±»ä½“ç³» (è§„èŒƒ+åˆ›æ–°)
```mermaid
mindmap
  root((æ™ºèƒ½è§’è‰²åˆ›æ–°åº“))
    è§„èŒƒä¿è¯ç»´åº¦
      PromptXæ ‡å‡†æ ¼å¼
        assistantå…¼å®¹æ ¼å¼
        æ ‡å‡†å¼•ç”¨æ ¼å¼
        ç»„ä»¶åˆ†ç¦»æ ‡å‡†
      ç³»ç»Ÿé›†æˆæ ‡å‡†
        å‘ç°å…¼å®¹æ€§
        æ¿€æ´»å…¼å®¹æ€§
        å­¦ä¹ æµç¨‹æ ‡å‡†
    åˆ›æ–°ç”Ÿæˆç»´åº¦
      ä¸“ä¸šé¢†åŸŸåˆ›æ–°
        æŠ€æœ¯å¼€å‘åˆ›æ–°
          AIé©±åŠ¨å¼€å‘æ–¹æ³•
          å…¨æ ˆåˆ›æ–°æ¶æ„
        äº§å“è®¾è®¡åˆ›æ–°
          ç”¨æˆ·ä½“éªŒåˆ›æ–°
          æ™ºèƒ½äº§å“è®¾è®¡
        æ•°æ®ç§‘å­¦åˆ›æ–°
          AI/MLä¸“ä¸šåˆ›æ–°
          æ™ºèƒ½åˆ†ææ–¹æ³•
      æ€ç»´æ¨¡å¼åˆ›æ–°
        åˆ†æå‹åˆ›æ–°æ€ç»´
        åˆ›æ„å‹çªç ´æ€ç»´
        æ‰§è¡Œå‹ä¼˜åŒ–æ€ç»´
        åä½œå‹èåˆæ€ç»´
      ä¸ªæ€§åŒ–é€‚é…
        ç”¨æˆ·åå¥½é€‚é…
        é¢†åŸŸç‰¹è‰²é€‚é…
        ä¸Šä¸‹æ–‡æ„ŸçŸ¥é€‚é…
```

#### æ™ºèƒ½è§’è‰²åˆ›æ–°ç”Ÿæˆç®—æ³• (è§„èŒƒ+åˆ›æ–°åŒä¿è¯)
```javascript
// æ™ºèƒ½è§’è‰²åˆ›æ–°ç”Ÿæˆå™¨ (è§„èŒƒä¿è¯ + åˆ›æ–°ç”ŸæˆåŒå¼•æ“)
class IntelligentRoleInnovator {
  async generateInnovativeRole(userInput) {
    // 1. æ·±åº¦éœ€æ±‚åˆ†æ - ç†è§£ç”¨æˆ·çœŸå®æ„å›¾å’Œåˆ›æ–°éœ€æ±‚
    const requirements = await this.deepRequirementAnalysis(userInput);
    
    // 2. åŒå±‚ç”Ÿæˆæ¶æ„
    const [complianceLayer, innovationLayer] = await Promise.all([
      this.generateComplianceLayer(requirements),  // è§„èŒƒä¿è¯å±‚
      this.generateInnovationLayer(requirements)   // åˆ›æ–°ç”Ÿæˆå±‚
    ]);
    
    // 3. æ™ºèƒ½èåˆ - å°†è§„èŒƒä¸åˆ›æ–°å®Œç¾ç»“åˆ
    const fusedRolePackage = await this.intelligentFusion(complianceLayer, innovationLayer);
    
    // 4. åŒé‡éªŒè¯ - PromptXè§„èŒƒ100%åˆè§„ + åˆ›æ–°è´¨é‡è¯„ä¼°
    const validatedPackage = await this.dualValidation(fusedRolePackage);
    
    // 5. ä¸ªæ€§åŒ–ä¼˜åŒ– - æ ¹æ®ç”¨æˆ·åå¥½å’Œä¸Šä¸‹æ–‡è¿›ä¸€æ­¥ä¼˜åŒ–
    const personalizedPackage = await this.personalizeWithContext(validatedPackage, requirements);
    
    return personalizedPackage;
  }
  
  async generateComplianceLayer(requirements) {
    // è§„èŒƒä¿è¯å±‚ï¼šç¡®ä¿100%ç¬¦åˆPromptXæ ‡å‡†
    return this.generateStandardCompliantStructure(requirements);
  }
  
  async generateInnovationLayer(requirements) {
    // åˆ›æ–°ç”Ÿæˆå±‚ï¼šAIé©±åŠ¨çš„ä¸ªæ€§åŒ–å†…å®¹åˆ›æ–°
    const domainKnowledge = await this.enrichWithDomainKnowledge(requirements);
    const innovativeContent = await this.generateInnovativeContent(domainKnowledge);
    return this.applyPersonalizationFilter(innovativeContent, requirements);
  }
  
  generateStandardCompliantRole(requirements) {
    const roleName = requirements.roleName;
    
    return {
      // ä¸¥æ ¼æŒ‰ç…§assistant.role.mdæ ¼å¼çš„ä¸»æ–‡ä»¶
      mainFile: {
        path: `${roleName}/${roleName}.role.md`,
        content: this.generateStandardMainFile(roleName)
      },
      
      // æ ‡å‡†thoughtç»„ä»¶æ–‡ä»¶
      thoughtFile: {
        path: `${roleName}/thought/${roleName}.thought.md`,
        content: this.generateStandardThoughtComponent(requirements)
      },
      
      // æ ‡å‡†executionç»„ä»¶æ–‡ä»¶  
      executionFile: {
        path: `${roleName}/execution/${roleName}.execution.md`,
        content: this.generateStandardExecutionComponent(requirements)
      }
    };
  }
  
  generateStandardMainFile(roleName) {
    // ä¸¥æ ¼éµå¾ªassistant.role.mdçš„æ ¼å¼
    return `<role>
  <personality>
    @!thought://remember
    @!thought://recall
    @!thought://${roleName}
  </personality>

  <principle>
    @!execution://${roleName}
  </principle>
</role>`;
  }
  
  validatePromptXCompliance(rolePackage) {
    // éªŒè¯ä¸»æ–‡ä»¶æ ¼å¼æ˜¯å¦ä¸assistant.role.mdä¸€è‡´
    this.assertMainFileCompliance(rolePackage.mainFile);
    
    // éªŒè¯å¼•ç”¨æ ¼å¼æ˜¯å¦æ­£ç¡®
    this.assertReferenceFormat(rolePackage.mainFile);
    
    // éªŒè¯æ–‡ä»¶ç»“æ„æ˜¯å¦æ ‡å‡†
    this.assertFileStructure(rolePackage);
    
    // éªŒè¯ç»„ä»¶å®Œæ•´æ€§
    this.assertComponentCompleteness(rolePackage);
    
    return rolePackage;
  }
  
  assertMainFileCompliance(mainFile) {
    // å¿…é¡»ä»…åŒ…å«personalityå’Œprincipleä¸¤ä¸ªç»„ä»¶
    // å¿…é¡»ä½¿ç”¨æ ‡å‡†çš„@!thought://å’Œ@!execution://å¼•ç”¨
    // ä¸å…è®¸ä»»ä½•å†…è”å†…å®¹
    if (!this.matchesAssistantFormat(mainFile.content)) {
      throw new Error('ä¸»æ–‡ä»¶æ ¼å¼ä¸ç¬¦åˆPromptXæ ‡å‡† (å‚è€ƒ: assistant.role.md)');
    }
  }
}
```

### 4. è‡ªåŠ¨éªŒè¯å’Œä¿®å¤ç³»ç»Ÿ

#### éªŒè¯å¼•æ“æ¶æ„
```mermaid
flowchart TD
    A[è§’è‰²æ–‡ä»¶è¾“å…¥] --> B[è¯­æ³•éªŒè¯å™¨]
    B --> C[ç»“æ„éªŒè¯å™¨]
    C --> D[å¼•ç”¨éªŒè¯å™¨]
    D --> E[å†…å®¹éªŒè¯å™¨]
    E --> F[é›†æˆéªŒè¯å™¨]
    
    B --> B1[DPMLè¯­æ³•æ£€æŸ¥]
    B --> B2[XMLæ ¼å¼éªŒè¯]
    
    C --> C1[æ–‡ä»¶ç»“æ„æ£€æŸ¥]
    C --> C2[ç»„ä»¶å®Œæ•´æ€§éªŒè¯]
    
    D --> D1[å¼•ç”¨è·¯å¾„éªŒè¯]
    D --> D2[å¼•ç”¨æ ¼å¼æ£€æŸ¥]
    
    E --> E1[å†…å®¹è´¨é‡è¯„ä¼°]
    E --> E2[ä¸“ä¸šæ€§æ£€æŸ¥]
    
    F --> F1[ç³»ç»Ÿå‘ç°æµ‹è¯•]
    F --> F2[æ¿€æ´»æµ‹è¯•]
    
    G[éªŒè¯æŠ¥å‘Š] --> H{éªŒè¯é€šè¿‡?}
    H -->|å¦| I[è‡ªåŠ¨ä¿®å¤å™¨]
    H -->|æ˜¯| J[æ³¨å†Œå°±ç»ª]
    
    I --> I1[è¯­æ³•ä¿®å¤]
    I --> I2[ç»“æ„ä¿®å¤]
    I --> I3[å¼•ç”¨ä¿®å¤]
    I --> I4[å†…å®¹ä¼˜åŒ–]
    
    I1 --> B
    I2 --> C
    I3 --> D
    I4 --> E
```

#### ä¿®å¤ç­–ç•¥çŸ©é˜µ
```javascript
const fixStrategies = {
  syntaxErrors: {
    unclosedTags: 'autoCloseXMLTags',
    invalidChars: 'sanitizeContent',
    encodingIssues: 'fixUTF8Encoding'
  },
  structureErrors: {
    missingFiles: 'generateMissingFiles',
    wrongNaming: 'standardizeNaming',
    invalidStructure: 'restructureFiles'
  },
  referenceErrors: {
    brokenReferences: 'fixReferencePaths',
    missingReferences: 'addMissingReferences',
    invalidFormat: 'standardizeReferenceFormat'
  },
  contentErrors: {
    incompleteSections: 'generateMissingSections',
    lowQuality: 'enhanceContent',
    inconsistentStyle: 'standardizeStyle'
  }
};
```

## ğŸ”§ æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 1. ä»£ç æ¶æ„é‡æ„

#### æ–°å¢æ ¸å¿ƒæ¨¡å—
```
src/lib/core/
â”œâ”€â”€ role-designer/
â”‚   â”œâ”€â”€ RoleDesignerEngine.js          # æ ¸å¿ƒå¼•æ“
â”‚   â”œâ”€â”€ TemplateGenerator.js           # æ¨¡æ¿ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ ValidationEngine.js            # éªŒè¯å¼•æ“
â”‚   â”œâ”€â”€ AutoFixEngine.js               # è‡ªåŠ¨ä¿®å¤å¼•æ“
â”‚   â”œâ”€â”€ RegistrationManager.js         # æ³¨å†Œç®¡ç†å™¨
â”‚   â””â”€â”€ InteractiveWizard.js           # äº¤äº’å¼å‘å¯¼
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ BaseTemplate.js                # åŸºç¡€æ¨¡æ¿ç±»
â”‚   â”œâ”€â”€ ProfessionalTemplates/         # ä¸“ä¸šè§’è‰²æ¨¡æ¿
â”‚   â”œâ”€â”€ CreativeTemplates/             # åˆ›æ„è§’è‰²æ¨¡æ¿
â”‚   â””â”€â”€ CustomTemplates/               # è‡ªå®šä¹‰æ¨¡æ¿
â””â”€â”€ validation/
    â”œâ”€â”€ DPMLValidator.js               # DPMLéªŒè¯å™¨
    â”œâ”€â”€ StructureValidator.js          # ç»“æ„éªŒè¯å™¨
    â””â”€â”€ ContentValidator.js            # å†…å®¹éªŒè¯å™¨
```

#### å‘½ä»¤ç³»ç»Ÿæ‰©å±•
```javascript
// src/lib/core/pouch/commands/CreateRoleCommand.js
class CreateRoleCommand extends Command {
  constructor() {
    super('create-role', 'åˆ›å»ºç¬¦åˆPromptXè§„èŒƒçš„è§’è‰²');
    this.standardGenerator = new PromptXStandardGenerator();
  }
  
  async execute(args, options) {
    if (options.interactive !== false) {
      return await this.runInteractiveWizard();
    } else {
      return await this.runCommandLineCreation(args, options);
    }
  }
  
  async runInteractiveWizard() {
    const wizard = new InteractiveWizard();
    const roleSpec = await wizard.collectUserInput();
    return await this.createStandardRole(roleSpec);
  }
  
  async createStandardRole(spec) {
    // 1. ç”Ÿæˆç¬¦åˆPromptXè§„èŒƒçš„è§’è‰²æ–‡ä»¶
    const standardRolePackage = await this.standardGenerator.generateRole(spec);
    
    // 2. PromptXè§„èŒƒéªŒè¯ (å¿…é¡»100%é€šè¿‡)
    const complianceResult = await this.validatePromptXCompliance(standardRolePackage);
    if (!complianceResult.isCompliant) {
      throw new Error(`PromptXè§„èŒƒéªŒè¯å¤±è´¥: ${complianceResult.errors.join(', ')}`);
    }
    
    // 3. åˆ›å»ºæ–‡ä»¶åˆ°æ ‡å‡†ç›®å½•ç»“æ„
    await this.createStandardFiles(standardRolePackage);
    
    // 4. ç³»ç»Ÿå‘ç°éªŒè¯ (ç¡®ä¿èƒ½è¢«å‘ç°)
    const discoveryResult = await this.validateSystemDiscovery(spec.roleName);
    if (!discoveryResult.isDiscoverable) {
      throw new Error(`è§’è‰²å‘ç°å¤±è´¥: ${discoveryResult.error}`);
    }
    
    // 5. æ¿€æ´»æµ‹è¯• (ç¡®ä¿èƒ½è¢«æ¿€æ´»)
    const activationResult = await this.testRoleActivation(spec.roleName);
    if (!activationResult.canActivate) {
      throw new Error(`è§’è‰²æ¿€æ´»å¤±è´¥: ${activationResult.error}`);
    }
    
    return {
      success: true,
      roleName: spec.roleName,
      compliantFiles: standardRolePackage,
      complianceResult,
      discoveryResult,
      activationResult,
      message: `âœ… è§’è‰² "${spec.roleName}" åˆ›å»ºæˆåŠŸå¹¶ç¬¦åˆPromptXè§„èŒƒï¼`
    };
  }
  
  async validatePromptXCompliance(rolePackage) {
    // éªŒè¯ä¸»æ–‡ä»¶æ˜¯å¦ä¸assistant.role.mdæ ¼å¼ä¸€è‡´
    const mainFileValid = this.validateMainFileFormat(rolePackage.mainFile);
    const referenceValid = this.validateReferenceFormat(rolePackage.mainFile);
    const structureValid = this.validateFileStructure(rolePackage);
    
    return {
      isCompliant: mainFileValid && referenceValid && structureValid,
      mainFileValid,
      referenceValid,
      structureValid,
      errors: this.collectValidationErrors([mainFileValid, referenceValid, structureValid])
    };
  }
}
```

### 2. é…ç½®æ–‡ä»¶æ‰©å±•

#### package.json æ–°å¢ä¾èµ–
```json
{
  "dependencies": {
    "inquirer": "^9.0.0",
    "chalk": "^5.0.0",
    "ora": "^6.0.0",
    "js-yaml": "^4.1.0",
    "ajv": "^8.12.0"
  },
  "scripts": {
    "create-role": "node src/bin/promptx.js create-role",
    "validate-role": "node src/bin/promptx.js validate-role",
    "fix-role": "node src/bin/promptx.js fix-role"
  }
}
```

#### ç³»ç»Ÿé…ç½®æ‰©å±•
```javascript
// src/config/role-designer.config.js
module.exports = {
  templates: {
    basePath: './prompt/templates',
    categories: ['professional', 'creative', 'technical', 'management'],
    defaultTemplate: 'professional'
  },
  validation: {
    strictMode: true,
    autoFix: true,
    validationRules: './config/validation-rules.json'
  },
  generation: {
    outputPath: './prompt/domain',
    fileEncoding: 'utf-8',
    createBackup: true
  },
  registration: {
    autoRegister: true,
    testActivation: true,
    updateIndex: true
  }
};
```

### 3. ç”¨æˆ·ä½“éªŒä¼˜åŒ–

#### è¿›åº¦æŒ‡ç¤ºå’Œåé¦ˆ
```javascript
// åˆ›å»ºè¿‡ç¨‹çš„ç”¨æˆ·åé¦ˆ
class ProgressIndicator {
  async createRoleWithProgress(spec) {
    const spinner = ora('æ­£åœ¨åˆ›å»ºè§’è‰²...').start();
    
    try {
      spinner.text = 'ğŸ¯ åˆ†æéœ€æ±‚...';
      const analysis = await this.analyzeRequirements(spec);
      
      spinner.text = 'ğŸ“ ç”Ÿæˆæ¨¡æ¿...';
      const template = await this.generateTemplate(analysis);
      
      spinner.text = 'âœ… éªŒè¯æ ¼å¼...';
      const validation = await this.validateTemplate(template);
      
      if (!validation.isValid) {
        spinner.text = 'ğŸ”§ è‡ªåŠ¨ä¿®å¤...';
        template = await this.autoFix(template, validation);
      }
      
      spinner.text = 'ğŸ“ åˆ›å»ºæ–‡ä»¶...';
      await this.createFiles(template);
      
      spinner.text = 'ğŸ”— æ³¨å†Œè§’è‰²...';
      await this.registerRole(spec.roleName);
      
      spinner.text = 'ğŸ§ª æµ‹è¯•æ¿€æ´»...';
      const testResult = await this.testActivation(spec.roleName);
      
      spinner.succeed(chalk.green(`âœ¨ è§’è‰² "${spec.displayName}" åˆ›å»ºæˆåŠŸï¼`));
      
      // æ˜¾ç¤ºä½¿ç”¨æŒ‡å—
      this.showUsageGuide(spec.roleName);
      
    } catch (error) {
      spinner.fail(chalk.red(`âŒ åˆ›å»ºå¤±è´¥: ${error.message}`));
      this.showTroubleshootingGuide(error);
    }
  }
  
  showUsageGuide(roleName) {
    console.log(chalk.cyan(`
ğŸ“š ä½¿ç”¨æŒ‡å—:
  æ¿€æ´»è§’è‰²: npx dpml-prompt action ${roleName}
  æŸ¥çœ‹è¯¦æƒ…: npx dpml-prompt hello
  ç¼–è¾‘è§’è‰²: ä¿®æ”¹ ./prompt/domain/${roleName}/ ç›®å½•ä¸‹çš„æ–‡ä»¶
  
ğŸ‰ æ‚¨çš„è§’è‰²å·²å‡†å¤‡å°±ç»ªï¼
    `));
  }
}
```

## ğŸš€ å®æ–½è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šæ ¸å¿ƒå¼•æ“å¼€å‘ï¼ˆ2-3å‘¨ï¼‰
- [ ] RoleDesignerEngineæ ¸å¿ƒç±»å¼€å‘
- [ ] åŸºç¡€æ¨¡æ¿ç³»ç»Ÿå®ç°
- [ ] DPMLéªŒè¯å¼•æ“å¼€å‘
- [ ] æ–‡ä»¶ç”Ÿæˆå’Œç®¡ç†åŠŸèƒ½

### ç¬¬äºŒé˜¶æ®µï¼šCLIé›†æˆï¼ˆ1-2å‘¨ï¼‰
- [ ] CreateRoleCommandå‘½ä»¤å®ç°
- [ ] äº¤äº’å¼å‘å¯¼å¼€å‘
- [ ] è¿›åº¦æŒ‡ç¤ºå’Œç”¨æˆ·åé¦ˆ
- [ ] é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶

### ç¬¬ä¸‰é˜¶æ®µï¼šè‡ªåŠ¨åŒ–ç³»ç»Ÿï¼ˆ1-2å‘¨ï¼‰
- [ ] è‡ªåŠ¨éªŒè¯å’Œä¿®å¤å¼•æ“
- [ ] æ™ºèƒ½æ³¨å†Œç³»ç»Ÿ
- [ ] ç³»ç»Ÿå‘ç°é›†æˆ
- [ ] æµ‹è¯•æ¿€æ´»æœºåˆ¶

### ç¬¬å››é˜¶æ®µï¼šæ¨¡æ¿åº“å»ºè®¾ï¼ˆ1å‘¨ï¼‰
- [ ] å¸¸ç”¨è§’è‰²æ¨¡æ¿å¼€å‘
- [ ] æ¨¡æ¿åˆ†ç±»å’Œç´¢å¼•
- [ ] æ™ºèƒ½æ¨èç®—æ³•
- [ ] ç”¨æˆ·è‡ªå®šä¹‰æ¨¡æ¿æ”¯æŒ

### ç¬¬äº”é˜¶æ®µï¼šæµ‹è¯•å’Œä¼˜åŒ–ï¼ˆ1å‘¨ï¼‰
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–
- [ ] é›†æˆæµ‹è¯•
- [ ] ç”¨æˆ·ä½“éªŒæµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–

## ğŸ“ˆ é¢„æœŸæ•ˆæœ

### ç”¨æˆ·ä»·å€¼æå‡
- **åˆ›å»ºæ•ˆç‡**ï¼šä»æ‰‹åŠ¨åˆ›å»º2-3å°æ—¶ â†’ äº¤äº’å¼åˆ›å»º5-10åˆ†é’Ÿ
- **æˆåŠŸç‡**ï¼šä»çº¦60%è§„èŒƒç¬¦åˆç‡ â†’ æ¥è¿‘100%è‡ªåŠ¨åˆè§„
- **å­¦ä¹ æˆæœ¬**ï¼šä»éœ€è¦æ·±åº¦å­¦ä¹ DPML â†’ é›¶å­¦ä¹ æˆæœ¬ä¸Šæ‰‹
- **åˆ›æ–°èƒ½åŠ›**ï¼šä»é™æ€è§’è‰²åº“ â†’ æ— é™åˆ›æ–°å¯èƒ½æ€§

### ç³»ç»Ÿèƒ½åŠ›å¢å¼º
- **å¯æ‰©å±•æ€§**ï¼šç”¨æˆ·å¯ä»¥æ— é™æ‰©å±•è§’è‰²åº“
- **æ ‡å‡†åŒ–**ï¼šæ‰€æœ‰è§’è‰²è‡ªåŠ¨ç¬¦åˆç³»ç»Ÿè§„èŒƒ
- **é›†æˆåº¦**ï¼šè§’è‰²åˆ›å»ºä¸ç³»ç»Ÿæ— ç¼é›†æˆ
- **ç»´æŠ¤æ€§**ï¼šè‡ªåŠ¨åŒ–å‡å°‘äººå·¥ç»´æŠ¤æˆæœ¬

### ç”Ÿæ€å»ºè®¾
- **ç¤¾åŒºè´¡çŒ®**ï¼šç”¨æˆ·æ›´å®¹æ˜“è´¡çŒ®é«˜è´¨é‡è§’è‰²
- **çŸ¥è¯†ç§¯ç´¯**ï¼šå½¢æˆæœ€ä½³å®è·µå’Œæ¨¡æ¿åº“
- **å·¥å…·å¤ç”¨**ï¼šå…¶ä»–é¡¹ç›®å¯ä»¥å¤ç”¨æ•´å¥—æœºåˆ¶
- **æ ‡å‡†æ¨å¹¿**ï¼šæ¨åŠ¨DPMLåè®®çš„æ ‡å‡†åŒ–åº”ç”¨

## ğŸ¯ æˆåŠŸæŒ‡æ ‡

### PromptXè§„èŒƒåˆè§„æ€§æŒ‡æ ‡ (æœ€é«˜ä¼˜å…ˆçº§)
- [ ] **ä¸»æ–‡ä»¶æ ¼å¼åˆè§„ç‡ = 100%** (ä¸assistant.role.mdæ ¼å¼ä¸€è‡´)
- [ ] **å¼•ç”¨æ ¼å¼å‡†ç¡®ç‡ = 100%** (ä½¿ç”¨@!thought://å’Œ@!execution://æ ¼å¼)
- [ ] **æ–‡ä»¶ç»“æ„æ ‡å‡†ç‡ = 100%** (ç»„ä»¶æ­£ç¡®åˆ†ç¦»)
- [ ] **ç³»ç»Ÿå‘ç°æˆåŠŸç‡ = 100%** (è§’è‰²èƒ½è¢«æ­£ç¡®å‘ç°)
- [ ] **è§’è‰²æ¿€æ´»æˆåŠŸç‡ = 100%** (è§’è‰²èƒ½è¢«æ­£ç¡®æ¿€æ´»)

### æŠ€æœ¯æŒ‡æ ‡ (æ¬¡è¦ä¼˜å…ˆçº§)
- [ ] è§’è‰²åˆ›å»ºæˆåŠŸç‡ â‰¥ 95%
- [ ] DPMLè§„èŒƒç¬¦åˆç‡ = 100%
- [ ] PromptXè§„èŒƒè‡ªåŠ¨éªŒè¯ç‡ = 100%
- [ ] è‡ªåŠ¨ä¿®å¤æˆåŠŸç‡ â‰¥ 90%

### ç”¨æˆ·ä½“éªŒæŒ‡æ ‡
- [ ] å¹³å‡åˆ›å»ºæ—¶é—´ â‰¤ 10åˆ†é’Ÿ
- [ ] ç”¨æˆ·æ»¡æ„åº¦ â‰¥ 4.5/5.0
- [ ] å­¦ä¹ æˆæœ¬ â‰¤ 30åˆ†é’Ÿ
- [ ] è§„èŒƒé”™è¯¯ç‡ = 0% (ç”Ÿæˆçš„è§’è‰²å¿…é¡»100%ç¬¦åˆè§„èŒƒ)

### ç”Ÿæ€æŒ‡æ ‡
- [ ] ç¤¾åŒºè´¡çŒ®è§’è‰²æ•°é‡å¢é•¿ â‰¥ 300%
- [ ] è§’è‰²å¤ç”¨ç‡ â‰¥ 80%
- [ ] æ¨¡æ¿åº“è¦†ç›–ç‡ â‰¥ 95%çš„å¸¸è§éœ€æ±‚
- [ ] ç³»ç»Ÿç¨³å®šæ€§ â‰¥ 99.9%
- [ ] **è§„èŒƒä¸€è‡´æ€§ç»´æŠ¤ç‡ = 100%** (æ‰€æœ‰è§’è‰²ä¿æŒè§„èŒƒä¸€è‡´)

---

## ğŸ“ æ€»ç»“

å°†role-designerå‡çº§ä¸ºPromptXç³»ç»Ÿçš„æ™ºèƒ½åŒ–è§’è‰²åˆ›æ–°æ ¸å¿ƒï¼Œæ˜¯ä¸€ä¸ª**é©å‘½æ€§çªç ´å†³ç­–**ï¼Œ**æ ¸å¿ƒç›®æ ‡æ˜¯å®ç°è§„èŒƒä¸åˆ›æ–°çš„å®Œç¾å¹³è¡¡**ã€‚

**ğŸ¯ æ ¸å¿ƒä»·å€¼**ï¼š
- âš–ï¸ **è§„èŒƒä¸åˆ›æ–°å®Œç¾å¹³è¡¡**ï¼šåœ¨100%PromptXè§„èŒƒåˆè§„åŸºç¡€ä¸Šå®ç°æ— é™åˆ›æ–°å¯èƒ½
- ğŸ§  **AIé©±åŠ¨çš„æ™ºèƒ½ç†è§£**ï¼šæ·±åº¦è§£æç”¨æˆ·éœ€æ±‚ï¼Œç”Ÿæˆé«˜åº¦ä¸ªæ€§åŒ–çš„ä¸“ä¸šè§’è‰²å†…å®¹
- ğŸ”„ **åŒå±‚æ¶æ„ä¿è¯**ï¼šè§„èŒƒä¿è¯å±‚ç¡®ä¿100%åˆè§„ï¼Œåˆ›æ–°ç”Ÿæˆå±‚æ»¡è¶³ä¸ªæ€§åŒ–éœ€æ±‚
- ğŸš€ **æ™ºèƒ½åŒ–ç”¨æˆ·ä½“éªŒ**ï¼šä»éœ€æ±‚ç†è§£åˆ°ä¸ªæ€§åŒ–åˆ›å»ºçš„ä¸€é”®å¼æ™ºèƒ½æ“ä½œ
- ğŸ­ **æ— é™åˆ›æ–°ç”Ÿæ€**ï¼šå»ºç«‹å¯æ— é™æ‰©å±•çš„æ™ºèƒ½åŒ–è§’è‰²åˆ›æ–°å¹³å°

**ğŸ“ˆ é¢„æœŸæˆæœ**ï¼š
é€šè¿‡**æ™ºèƒ½åŒå±‚æ¶æ„**ã€**AIé©±åŠ¨åˆ›æ–°**å’Œ**è§„èŒƒä¿è¯ä¼˜å…ˆ**çš„è®¾è®¡ç†å¿µï¼ŒPromptXå°†ä»ä¸€ä¸ªå­˜åœ¨è§„èŒƒä¸ä¸€è‡´é—®é¢˜çš„å·¥å…·åº“ï¼Œé©å‘½æ€§å‡çº§ä¸ºä¸€ä¸ª**æ—¢ä¸¥æ ¼æ ‡å‡†åŒ–åˆå…·å¤‡æ— é™åˆ›æ–°èƒ½åŠ›çš„æ™ºèƒ½åŒ–AIè§’è‰²å¹³å°**ã€‚

è¿™ä¸ä»…å½»åº•è§£å†³äº†è§„èŒƒä¸ç¬¦çš„æŠ€æœ¯ç—›ç‚¹ï¼Œæ›´å¼€åˆ›äº†**AIé©±åŠ¨çš„ä¸ªæ€§åŒ–è§’è‰²åˆ›æ–°**æ–°çºªå…ƒï¼Œä½¿PromptXæˆä¸ºçœŸæ­£æ„ä¹‰ä¸Šçš„**æ™ºèƒ½åŒ–ã€æ ‡å‡†åŒ–ã€åˆ›æ–°åŒ–**çš„AIæç¤ºè¯å·¥ç¨‹é¢†å¯¼å¹³å°ï¼Œä¸ºç”¨æˆ·æä¾›**æ—¢ç¬¦åˆä¸¥æ ¼è§„èŒƒåˆå……æ»¡åˆ›æ–°æ´»åŠ›**çš„è§’è‰²è®¾è®¡ä½“éªŒã€‚ 